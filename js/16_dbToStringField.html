<html>
<head>
	<title>validation Test</title>
	<meta charset="utf-8"/>
	<script src="jquery-1.11.3.js"></script>	
    

<meta name="author" content="아라한사">
<title> 문서 컬럼 변환기 4 자바 </title>

<!-- SEO -->
<meta content="summary" name="twitter:card"/>
<meta content="@arahansa" name="twitter:site"/>
<meta name="twitter:title" content="문서 컬럼 변환기 4 자바"/>
<meta name="twitter:description" content="문서의 내용을 자바 필드 또는 SQL문으로 변환한다."/>
<meta name="twitter:creator" content="@arahansa"/>
<meta name="twitter:image:src" content="../img/me.jpg"/>

<meta property="og:title" content="문서 컬럼 변환기 4 자바"/>
<meta property="og:image" content="../img/me.jpg"/>
<meta property="og:description" content="문서의 내용을 자바 필드 또는 SQL문으로 변환한다."/>
<meta content="article" property="og:type"/>

</head>
<body>
<button onclick="changeToJavaField()">자바 필드로 변환</button>
<button onclick="changeToSqlQuery()">SQL 쿼리로 변환</button>
<button onclick="changeToSqlInsertQuery()">SQL 인서트 쿼리로 변환</button>
<br>
<input type="checkbox" id="reverseChk"> 디비 컬럼명이 앞에 나올 경우 체크 하세요

<hr>
	<textarea id="origin" cols="80" rows="100">회원명    USER_NM
회원명타입    USER_NM_CD   
    </textarea>
    <textarea id="target" cols="80" rows="100"></textarea>


<script>
    const underScore = "_";
function setNull(){
    $("#target").html('');
}

function changeToJavaField(){
    console.log("체크박스 선택 여부 : ", $("#reverseChk").is(":checked"));

    setNull();
    console.log("변화");
    var lines = $('#origin').val().split('\n');
    for(var i = 0;i < lines.length;i++){
        if(lines[i].trim().length==0) continue;
        //code here using lines[i] which will give you each line
        var row = lines[i].trim().split(/\s+/);

        console.log("row1 : " , row[0]);
        console.log("row2 : " , row[1]);
        if($("#reverseChk").is(":checked")){
            $("#target").append("private String "+getLowerName(row[0])+"; // "+row[1] +"\n");    
        }else{
            $("#target").append("private String "+getLowerName(row[1])+"; // "+row[0] +"\n");    
        }
        if((i+1)%5==0){
            console.log("5번째 로우 : "+row);
            $("#target").append("\n");
        }         
    }
    $("#target").focus();
}

      
function getLowerName(name){
    var name = name.toLowerCase();
    while(name.indexOf(underScore)>-1){
        name = getUppercaseLetter(name, name.indexOf(underScore));
    }
    return name;
}

function getUppercaseLetter(name, position){
    return name.substr(0, position) + name.charAt(position+1).toUpperCase() + name.substr(position+2, name.length);
}


function changeToSqlQuery(){
    setNull();
    var lines = $('#origin').val().split('\n');
    var comma = "\t,";
    var selectStatement = "SELECT \n ";
    for(var i = 0;i < lines.length;i++){
        if(lines[i].trim().length==0) continue;
        var row = lines[i].trim().split(/\s+/);

        var targetString = i==0 ?  selectStatement : comma;
        if($("#reverseChk").is(":checked")){
            $("#target").append(targetString+row[0]+ " as " +getLowerName(row[0])+" \t\t /* "+ row[1] + " */ \n");    
        }else{
            $("#target").append(targetString+row[1]+ " as " +getLowerName(row[1])+" \t\t /* "+ row[0] + " */ \n");    
        }
        if((i+1)%5==0){
            console.log("5번째 로우 : "+row);
            $("#target").append("\n");
        } 
    }
    $("#target").focus();
}

function changeToSqlInsertQuery(){
    setNull();
    var lines = $('#origin').val().split('\n');
    var comma = "\t,";

    for(var i = 0;i < lines.length;i++){
        if(lines[i].trim().length==0) continue;
        var row = lines[i].trim().split(/\s+/);

        $("#target").append(comma +row[1]+ " \t\t /* "+ row[0] + " */ \n");

    }

    $("#target").append(" ) VALUES ( \n");

    for(var i = 0;i < lines.length;i++){
        if(lines[i].trim().length==0) continue;
        var row = lines[i].trim().split(/\s+/);
        $("#target").append(comma + "#{" +getLowerName(row[1])+ "}" + " \t\t /* "+ row[0] + " */ \n");
    }
    $("#target").focus();
}

</script>
</body>
</html>